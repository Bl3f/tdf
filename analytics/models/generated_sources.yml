version: 2

sources:
- name: lake
  tables:
  - name: race
    description: Strava activity data for a specific rider, stage and time. An activity
      contains GPS and physical data that might be null. For a given rider + stage
      you get an activity timeseries.
    external:
      location: 'gs://{{ env_var("GCS_BUCKET_NAME") }}/race/*.parquet'
      options:
        format: parquet
    meta:
      dagster:
        asset_key: race
  - name: riders
    description: List of all the 2023 Tour de France riders.
    external:
      location: 'gs://{{ env_var("GCS_BUCKET_NAME") }}/riders.parquet'
      options:
        format: parquet
    meta:
      dagster:
        asset_key: riders
  - name: stages_info
    description: Static information about stages.
    external:
      location: 'gs://{{ env_var("GCS_BUCKET_NAME") }}/stages_info.parquet'
      options:
        format: parquet
    meta:
      dagster:
        asset_key: stages_info
  - name: stages
    description: Official GPS tracks of the stages, the CSV is sorted from the beginning
      to the end.
    external:
      location: 'gs://{{ env_var("GCS_BUCKET_NAME") }}/stages.parquet'
      options:
        format: parquet
    meta:
      dagster:
        asset_key: stages
